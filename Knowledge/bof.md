# BufferOverFlowとは
プログラムがデータを一時保存するメモリ領域の容量を超えてデータを書き込み、隣接するメモリ領域を破壊したり上書きしたりする脆弱性。

## メモリについて
32bitでも64bitでもメモリのアドレス一つにつき、常に入るデータは8bitとなる。

## 32bitと64bitについて
一度に処理できる容量で、レジスタの容量など。

## NX/DEPとは
スタック上のバッファにシェルコードを書き込んで、その場で実行させることを防ぐためのもの。
メモリの各領域にパーミッションを設定し、権限を管理している。

## ROPとは
スタック上に書き込んだシェルコードは実行できないが、スタックに書き込んだアドレスへジャンプは可能。
これを利用して、メモリ上に最初から存在するガジェットを呼び出して実行する。

## ASLRとは
プログラムを起動するたびに、スタック、ヒープ、共有ライブラリが配置されるメモリ上のベースアドレスをランダムに変更する機能。
アドレスはランダムに変わるが、関数と関数の間の距離（オフセット）は常に一定となる。

## レジスタとは
CPU内にある高速メモリのこと。

## 引数レジスタ
64bitのlinuxにおいて最初の6個までの引数はレジスタに入れる。
最初の6個
- RDI
- RSI
- RDX
- RCX
- R8
- R9
system関数を使いたい前提にすると、引数は一つのためRDIが分かればよい。

## 関数の実行結果が入るレジスタ
- RAX

## ポインタが入るレジスタ
- RIP 次に実行する命令のポインタ
- RSP スタックの一番上のポインタ
- RBP 関数が変数の場所を特定するための基準となるポインタ

## アセンブリについて
- `MOV A B` AをBに入れる
- `PUSH A` AをRSPに置く
- `POP A` スタックの一番上の値をAレジスタに入れる
- `CALL <関数>` 関数にジャンプする。ジャンプ前に現在地をスタックにpushする
- `RET` RSPが指すアドレスへジャンプし、値をRIPに入れる。RIPが指すアドレスにジャンプする
